<!--
  #%L
  Conduit Worker
  %%
  Copyright (C) 2012 - 2014 InMobi
  %%
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  
       http://www.apache.org/licenses/LICENSE-2.0
  
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
  #L%
  -->
<conduit>
  <defaults>
    <rootdir>/test-combo</rootdir>
    <retentioninhours>25</retentioninhours>
    <trashretentioninhours>6</trashretentioninhours>
  </defaults>


  <streams>
  
  <!-- Local Streams -->

   <stream name="stream1">
      <sources>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      </destinations>
    </stream>
    
    <stream name="stream2">
      <sources>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      </destinations>
    </stream>
  
    <stream name="stream3_testcluster1">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source> 
      </sources>
      <destinations>
      </destinations>
    </stream>

    <stream name="stream3_testcluster2">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source> 
      </sources>
      <destinations>
      </destinations>
    </stream>

    <stream name="stream3_testcluster3">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source> 
      </sources>
      <destinations>
      </destinations>
    </stream>
    <stream name="stream3_testcluster4">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source> 
      </sources>
      <destinations>
      </destinations>
    </stream>

    <stream name="stream4">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
        <source>
          <name>testcluster3</name>
          <retentioninhours>49</retentioninhours>
        </source>
        <source>
          <name>testcluster5</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      </destinations>
    </stream>

    <stream name="stream6">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>25</retentioninhours>
        </source>
        <source>
          <name>testcluster2</name>
          <retentioninhours>25</retentioninhours>
        </source>
        <source>
          <name>testcluster3</name>
          <retentioninhours>25</retentioninhours>
        </source>
  <source>
          <name>testcluster5</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      </destinations>
    </stream>

    <stream name="stream7">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>25</retentioninhours>
        </source>
        <source>
          <name>testcluster2</name>
          <retentioninhours>25</retentioninhours>
        </source>
        <source>
          <name>testcluster3</name>
          <retentioninhours>25</retentioninhours>
        </source>
  <source>
          <name>testcluster5</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      </destinations>
    </stream>

    <stream name="stream8">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      </destinations>
    </stream>

    <stream name="stream9">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      </destinations>
    </stream>

    <stream name="stream10">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      </destinations>
    </stream>

    <stream name="stream11">
      <sources>
        <source>
          <name>testcluster3</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      </destinations>
    </stream>

    <stream name="stream12">
      <sources>
        <source>
          <name>testcluster3</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      </destinations>
    </stream>

    <stream name="stream13">
      <sources>
        <source>
          <name>testcluster3</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      </destinations>
    </stream>

    <stream name="stream14">
      <sources>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      </destinations>
    </stream>

    <stream name="stream15">
      <sources>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      </destinations>
    </stream>

    <stream name="stream16">
      <sources>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      </destinations>
    </stream>

    <stream name="stream17">
      <sources>
        <source>
          <name>testcluster5</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      </destinations>
    </stream>

    <stream name="stream18">
      <sources>
        <source>
          <name>testcluster5</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      </destinations>
    </stream>

    <stream name="stream19">
      <sources>
        <source>
          <name>testcluster5</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      </destinations>
    </stream>


  <!-- Merged Streams -->

     <stream name="stream20">
      <sources>
       <source>
          <name>testcluster2</name>
          <retentioninhours>240</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster1</name>
          <retentioninhours>240</retentioninhours>
      </destination>
      </destinations>
    </stream>
<stream name="stream21">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>25</retentioninhours>
        </source>
        <source>
          <name>testcluster2</name>
          <retentioninhours>25</retentioninhours>
        </source>
        <source>
          <name>testcluster3</name>
          <retentioninhours>25</retentioninhours>
        </source>
  <source>
          <name>testcluster5</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster1</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      <destination>
          <primary>true</primary>
          <name>testcluster4</name>
          <retentioninhours>50</retentioninhours>
      </destination>

      </destinations>
    </stream>

     <stream name="stream22">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>25</retentioninhours>
        </source>
        <source>
          <name>testcluster2</name>
          <retentioninhours>25</retentioninhours>
        </source>
        <source>
          <name>testcluster3</name>
          <retentioninhours>25</retentioninhours>
        </source>
  <source>
          <name>testcluster5</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster1</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      <destination>
          <primary>true</primary>
          <name>testcluster4</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
    </stream>


     <stream name="stream23">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>25</retentioninhours>
        </source>
        <source>
          <name>testcluster2</name>
          <retentioninhours>25</retentioninhours>
        </source>
        <source>
          <name>testcluster3</name>
          <retentioninhours>25</retentioninhours>
        </source>
  <source>
          <name>testcluster5</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster1</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      <destination>
          <primary>true</primary>
          <name>testcluster4</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
    </stream>


   <stream name="stream24">
      <sources>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster3</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
    </stream>

   <stream name="stream25">
      <sources>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster1</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
    </stream>

   <stream name="stream26">
      <sources>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster2</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
    </stream>

   <stream name="stream27">
      <sources>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster5</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
    </stream>

   <stream name="stream28_testcluster3">
      <sources>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster3</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
    </stream>

   <stream name="stream28_testcluster1">
      <sources>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster1</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
    </stream>

   <stream name="stream28_testcluster2">
      <sources>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster2</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
    </stream>

   <stream name="stream28_testcluster5">
      <sources>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster5</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
    </stream>

  
  <!-- Mistream4or streaming -->
    <stream name="stream29">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>48</retentioninhours>
        </source>
      </sources>
     <destinations>
       <destination>
          <primary>true</primary>
          <name>testcluster1</name>
          <retentioninhours>48</retentioninhours>
       </destination>
       <destination>
          <name>testcluster2</name>
          <retentioninhours>48</retentioninhours>
       </destination>
        <destination>
          <name>testcluster3</name>
          <retentioninhours>48</retentioninhours>
        </destination>
     </destinations> 
    </stream>

    <stream name="stream3">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>48</retentioninhours>
        </source>
      </sources>
     <destinations>
       <destination>
          <primary>true</primary>
          <name>testcluster1</name>
          <retentioninhours>48</retentioninhours>
       </destination>
       <destination>
          <name>testcluster2</name>
          <retentioninhours>48</retentioninhours>
       </destination>
        <destination>
          <name>testcluster3</name>
          <retentioninhours>48</retentioninhours>
        </destination>
     </destinations>
    </stream>

    <stream name="stream30">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>48</retentioninhours>
        </source>
      </sources>
     <destinations>
       <destination>
          <primary>true</primary>
          <name>testcluster1</name>
          <retentioninhours>48</retentioninhours>
       </destination>
       <destination>
          <name>testcluster2</name>
          <retentioninhours>48</retentioninhours>
       </destination>
        <destination>
          <name>testcluster3</name>
          <retentioninhours>48</retentioninhours>
        </destination>
     </destinations>
    </stream>
 
 <stream name="stream5">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>48</retentioninhours>
        </source>
        <source>
          <name>testcluster2</name>
          <retentioninhours>48</retentioninhours>
        </source>
         <source>
          <name>testcluster3</name>
          <retentioninhours>48</retentioninhours>
        </source>
        <source>
          <name>testcluster5</name>
          <retentioninhours>48</retentioninhours>
        </source>
      </sources>
     <destinations>
       <destination>
          <primary>true</primary>
          <name>testcluster4</name>
          <retentioninhours>48</retentioninhours>
       </destination>
     </destinations>
    </stream>

  <stream name="ifc_ff">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>48</retentioninhours>
        </source>
        <source>
          <name>testcluster2</name>
          <retentioninhours>48</retentioninhours>
        </source>
         <source>
          <name>testcluster3</name>
          <retentioninhours>48</retentioninhours>
        </source>
  <source>
          <name>testcluster5</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
     <destinations>
       <destination>
          <primary>true</primary>
          <name>testcluster4</name>
          <retentioninhours>48</retentioninhours>
       </destination>
     </destinations>
    </stream>
  </streams>

<!-- stream5_* for all colos, merge on respective -->

   <stream name="stream5_testcluster1">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
        <source>
          <name>testcluster3</name>
          <retentioninhours>49</retentioninhours>
        </source>
        <source>
          <name>testcluster5</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster1</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
    </stream>



<!-- stream5_testcluster3 and stream5_wc1 both go as merged streams on testcluster3 -->

   <stream name="stream5_testcluster3">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
        <source>
          <name>testcluster3</name>
          <retentioninhours>49</retentioninhours>
        </source>
        <source>
          <name>testcluster5</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster3</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
    </stream>

   <stream name="stream5_ir1">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
        <source>
          <name>testcluster3</name>
          <retentioninhours>49</retentioninhours>
        </source>
  <source>
          <name>testcluster5</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster3</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>    
     </stream>


<!-- stream5_testcluster2 and stream5_wc1 both go as merged streams on testcluster2 -->
   <stream name="stream5_testcluster2">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
        <source>
          <name>testcluster3</name>
          <retentioninhours>49</retentioninhours>
        </source>
  <source>
          <name>testcluster5</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster2</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
    </stream>

   <stream name="stream5_wc1">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
        <source>
          <name>testcluster3</name>
          <retentioninhours>49</retentioninhours>
        </source>
  <source>
          <name>testcluster5</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster2</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>    
      </stream>
     
   <stream name="stream5_testcluster5">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source>
        <source>
          <name>testcluster2</name>
          <retentioninhours>49</retentioninhours>
        </source>
        <source>
          <name>testcluster3</name>
          <retentioninhours>49</retentioninhours>
        </source>
  <source>
          <name>testcluster5</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster5</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
      </stream>

<!-- abc_testcluster1   go as merged streams on testcluster1 -->
   <stream name="abc_testcluster1">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster1</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
    </stream>
<!-- abc_testcluster2   go as merged streams on testcluster2 -->
   <stream name="abc_testcluster2">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster2</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
    </stream>
<!-- abc_testcluster3   go as merged streams on testcluster3 -->
   <stream name="abc_testcluster3">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster3</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
    </stream>
<!-- abc_testcluster4   go as merged streams on testcluster5 -->
   <stream name="abc_testcluster5">
      <sources>
        <source>
          <name>testcluster1</name>
          <retentioninhours>49</retentioninhours>
        </source>
      </sources>
      <destinations>
      <destination>
          <primary>true</primary>
          <name>testcluster5</name>
          <retentioninhours>50</retentioninhours>
      </destination>
      </destinations>
    </stream>



  <clusters>
    <cluster name="testcluster1" hdfsurl="file:///tmp/testproduction/testcluster1" jturl="local" jobqueuename="default">        
    </cluster>
    <cluster name="testcluster2" hdfsurl="file:///tmp/testproduction/testcluster2" jturl="local" jobqueuename="default">        
    </cluster>
    <cluster name="testcluster3" hdfsurl="file:///tmp/testproduction/testcluster3" jturl="local" jobqueuename="default">        
    </cluster>
    <cluster name="testcluster4" hdfsurl="file:///tmp/testproduction/testcluster4" jturl="local" jobqueuename="default">
    </cluster>
    <cluster name="testcluster5" hdfsurl="file:///tmp/testproduction/testcluster5" jturl="local" jobqueuename="default">
    </cluster>
  </clusters>

</conduit>